## 操作闭包 Closure of Operations

多数有意义的对象最终都会产生仅用基本类型无法描述行为。

因此。

**在条件允许时，可以定义这样一种操作，它的返回值类型和输入参数（可能有多个）的类型是相同的。如果实现该操作的对象的状态在计算中会被使用，那么这个对象实际上就相当于该操作的一个参数，所以该操作的输入参数、返回值以及实现该操作的对象本身应该具有相同的类型。对于该类型的实例所组成的集合来说，这样的操作是封闭的。一个封闭的操作提供了一个高层的接口，而没有引入对其他概念的依赖。**

这种模式在值对象的操作中最为常用。由于实体的生命周期对于领域而言具有重要的意义，我们不能为了回答某个问题就生造一个新的实体。有些操作对于实体类型也是封闭的。可以询问一个员工对象的主管是谁，从而得到另一个员工对象。但一般来说，实体的概念并不用于表示计算的结果。所以，在多数情况下，都要从值对象中发掘使用这个模式的机会。

有时候我们只能用到这个模式的一半。要么参数的类型和实现对象的相同，但返回值的类型不同；要么返回值的类型与实现对象的相同，而参数类型不同。这些操作不是封闭的，但还是带来了操作闭包的部分优势，可以在一定程度上降低思考的负担。










